import{o as l,c as i,b as e,g as M,_ as I,V,M as A,T as x,h as b,a as c,d,w as L,e as u,j as p,x as P,Z as T,a0 as j}from"./index.d2b5948f.js";import{E as B}from"./editor.0b27adde.js";import{_ as H,s as y}from"./App.8a7f3b43.js";import"https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenLite.min.js";import"https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TimelineLite.min.js";function O(n,t){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})])}function S(n,t){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})])}function z(n,t){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9.75v6.75m0 0l-3-3m3 3l3-3m-8.25 6a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z"})])}function E(n,t){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0118 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0118 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 016 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5"})])}function D(n,t){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])}function N(n,t){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M4.5 4.5a3 3 0 00-3 3v9a3 3 0 003 3h8.25a3 3 0 003-3v-9a3 3 0 00-3-3H4.5zM19.94 18.75l-2.69-2.69V7.94l2.69-2.69c.944-.945 2.56-.276 2.56 1.06v11.38c0 1.336-1.616 2.005-2.56 1.06z"})])}const R=M(()=>I(()=>import("./IsPro.fde0d7a5.js"),["./IsPro.fde0d7a5.js","./App.8a7f3b43.js","./index.d2b5948f.js","./index.cfbf16fc.css"],import.meta.url)),W={components:{IsProTag:R,VueFinalModal:V,ModalsContainer:A,ArrowPathIcon:O,VideoCameraIcon:N,ClockIcon:S,FilmIcon:E,XCircleIcon:D,CloudArrowDownIcon:z},data(){return{stats:y,TempData:x,selected:{props:null},canvasContainer:b,editor:null,duration:5,exportSettings:!1,downloadLink:null,rendering:!1,showHeaderOptions:!1}},methods:{exportAsVideo(){if(this.appMode==="noAuth"&&this.isPro("yes"))return alert("Pro version required");this.exportSettings=!0},exportVid(n){this.downloadLink=URL.createObjectURL(n)},render(){this.downloadLink=null,this.rendering=!0,this.applyOnCanvas().then(n=>{const t=[],r=this.editor.layer.getNativeCanvasElement().captureStream(30),o=new MediaRecorder(r),s=new AudioContext,m=s.createMediaStreamDestination(),v=m.stream;this.editor.medias.forEach(h=>{var w=s.createMediaElementSource(h);w.connect(m)}),r.addTrack(v.getAudioTracks()[0]),o.ondataavailable=h=>{t.push(h.data)},o.onstop=h=>this.exportVid(new Blob(t,{type:"video/webm"})),o.start(0),setTimeout(()=>{o.stop(),this.rendering=!1},this.duration*1e3)}).catch(n=>{this.rendering=!1,console.log(n)})},closeModal(){this.editor.clearIntervals(),y.showPreviewModal=!1,this.editor.clearAll(),this.editor=null,document.getElementById("previewCanvas").innerHTML=""},replay(){this.applyOnCanvas()},applyOnCanvas(){return new Promise((n,t)=>{setTimeout(()=>{const g={width:parseInt(this.selected.props.cellWidth),height:parseInt(this.selected.props.cellHeight),container:"previewCanvas",containerWrapper:"previewStage",pageHeight:parseInt(this.selected.props.pageHeight),pageWidth:parseInt(this.selected.props.pageWidth),dragging:!1,readOnly:!0};this.editor&&(this.editor.clearIntervals(),document.getElementById("previewCanvas").innerHTML="",this.editor.clearAll());const r=new B(g);this.editor=r,r.readOnly=!0,this.canvas=r,window.preview=r;try{r.fitIntoContainer()}catch{}window.addEventListener("resize",function(){try{r.fitIntoContainer()}catch{}}),this.canvasContainer.editor.editor;let o=this.selected.props;r.editorWidth=parseInt(o.cellWidth),r.editorHeight=parseInt(o.cellHeight);try{r.ImportData.source(JSON.parse(b.editor.editor.toJSON())),setTimeout(()=>{r.transform.nodes([]),r.fitIntoContainer(),n()},100),r.fitIntoContainer()}catch{}},100)})}},mounted(){setTimeout(()=>{x.templateType.includes("banner")||(this.showHeaderOptions=!0)},200),this.selected.props=this.canvasContainer,this.applyOnCanvas().then(n=>{}).catch(n=>{console.log(n)})}},F={style:{height:"100vh"},class:"flex justify-center items-center h-full w-full"},U={class:"w-full flex justify-center"},K={class:"relative w-full h-full max-w-7xl"},X={class:"relative w-full bg-white rounded-lg shadow dark:bg-gray-700"},J=e("svg",{"aria-hidden":"true",class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),q=e("span",{class:"sr-only"},"Close modal",-1),Y=[J,q],Z={class:"px-6 py-3 border-b rounded-t dark:border-gray-600"},G={key:0,class:"text-base font-semibold text-gray-900 lg:text-xl dark:text-white flex items-center justify-center gap-3"},Q={key:0,style:{position:"absolute",top:"-15px",right:"-20px"}},$={key:0,class:"flex bg-gray-200 px-4 py-1 rounded-full items-center gap-3"},ee={key:1,class:"h-8 flex items-center justify-center font-semibold w-full"},te={class:"w-full"},oe={class:"md:w-full relative md:block overflow-auto bg-white top-0 w-full dark:bg-gray-500 items-center justify-center"},ne={key:0,class:"absolute bg-blue-400 bg-opacity-30 w-full h-full top-0 flex justify-center z-10 items-center"},re=e("div",{class:"bg-blue-500 font-semibold text-white px-3 py-1 rounded-full flex items-center"},[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),u(" Rendering... ")],-1),se=[re],le={key:1,class:"absolute bg-green-400 gap-5 bg-opacity-80 w-full h-full top-0 flex flex-col justify-center z-10 items-center"},ie=e("div",{class:"text-xl text-white bg-green-500 px-5 py-1 rounded-full shadow font-semibold"}," Your video is ready to download ",-1),ae={class:"px-3 py-1 rounded-full flex gap-5 items-center"},de=["href"],ce=e("div",{style:{height:"80vh"},class:"w-full h-full",id:"previewStage"},[e("div",{class:"flex justify-center",id:"previewCanvas"})],-1);function ue(n,t,g,r,o,s){const m=c("ArrowPathIcon"),v=c("VideoCameraIcon"),h=c("IsProTag"),w=c("ClockIcon"),_=c("FilmIcon"),f=c("XCircleIcon"),k=c("CloudArrowDownIcon"),C=c("vue-final-modal");return l(),i("div",null,[d(C,{modelValue:o.stats.showPreviewModal,"onUpdate:modelValue":t[7]||(t[7]=a=>o.stats.showPreviewModal=a),style:{"z-index":"9999999"},classes:"modal-container","content-class":"modal-content",onKeydown:j(s.closeModal,["esc"])},{default:L(()=>[e("div",F,[e("div",U,[e("div",K,[e("div",X,[e("button",{type:"button",onClick:t[0]||(t[0]=(...a)=>s.closeModal&&s.closeModal(...a)),class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-800 dark:hover:text-white"},Y),e("div",Z,[o.showHeaderOptions?(l(),i("h3",G,[e("button",{type:"button",class:"px-3 flex gap-2 py-2 text-xs font-medium text-center text-white bg-blue-700 rounded-full hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:t[1]||(t[1]=(...a)=>s.replay&&s.replay(...a))},[d(m,{class:"w-4"}),u(" ReRender ")]),e("button",{onClick:t[2]||(t[2]=(...a)=>s.exportAsVideo&&s.exportAsVideo(...a)),type:"button",class:"px-3 relative flex gap-2 py-2 text-xs font-medium text-center text-white bg-blue-700 rounded-full hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},[d(v,{class:"w-4"}),u(" Export as Video "),n.appMode==="noAuth"&&n.isPro("yes")?(l(),i("div",Q,[d(h)])):p("",!0)]),o.exportSettings?(l(),i("div",$,[d(w,{class:"w-4"}),P(e("input",{min:"1","onUpdate:modelValue":t[3]||(t[3]=a=>o.duration=a),class:"w-28 rounded-full h-7",placeholder:"Duration",type:"number"},null,512),[[T,o.duration]]),u(" Sec "),e("button",{onClick:t[4]||(t[4]=(...a)=>s.render&&s.render(...a)),type:"button",class:"px-3 flex gap-2 py-2 text-xs font-medium text-center text-white bg-blue-700 rounded-full hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},[d(_,{class:"w-4"}),u(" Render ")]),e("button",{onClick:t[5]||(t[5]=a=>o.exportSettings=!1),type:"button",class:"flex gap-2 text-xs text-red-600 font-medium text-center"},[d(f,{class:"w-5"})])])):p("",!0)])):(l(),i("div",ee," Preview "))]),e("div",te,[e("div",oe,[o.rendering?(l(),i("div",ne,se)):p("",!0),o.downloadLink?(l(),i("div",le,[ie,e("div",ae,[o.downloadLink?(l(),i("a",{key:0,href:o.downloadLink,download:"myvideo.webm",class:"px-3 flex gap-2 py-2 text-xs font-medium text-center text-white bg-green-700 rounded-full hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800"},[d(k,{class:"w-4"}),u(" Download Video ")],8,de)):p("",!0),e("button",{onClick:t[6]||(t[6]=a=>o.downloadLink=null),type:"button",class:"px-3 flex gap-2 py-2 text-xs font-medium text-center text-white bg-red-700 rounded-full hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800"},[d(f,{class:"w-4"}),u(" Close ")])])])):p("",!0),ce])])])])])])]),_:1},8,["modelValue","onKeydown"])])}const we=H(W,[["render",ue]]);export{we as default};
