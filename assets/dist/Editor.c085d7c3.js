import{r as M,g as s,_ as i,s as U,T as f,h as _,u as y,l as k,m as W,n as z,p as q,a as n,o,c,e as J,b as m,j as r,i as h,q as Y,d as p,k as Q,t as X,v as Z}from"./index.d2b5948f.js";import{E as $}from"./editor.0b27adde.js";import{_ as ee,u as w,s as v,A as te}from"./App.8a7f3b43.js";import{t as oe}from"./templates.7586709b.js";import{g as D}from"./template.000ba2c5.js";const se=M({enableRuler:!1,enableGrid:!1,enableGuide:!1,document:null}),E=M({hideSidebar:!0,hideProperties:!0});const ie=s(()=>i(()=>import("./index.452d65dc.js"),["./index.452d65dc.js","./index.d2b5948f.js","./index.cfbf16fc.css","./layer.2561e949.js","./App.8a7f3b43.js","./editor.0b27adde.js","./templates.7586709b.js","./template.000ba2c5.js"],import.meta.url)),re=s(()=>i(()=>import("./Index.10a27e59.js"),["./Index.10a27e59.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js","./PrintBtn.afc7804f.js","./data.580994c3.js","./templates.7586709b.js","./PlusCircleIcon.802e99ea.js","./SvgIcon.a6146f6b.js","./Index.427e89c3.css"],import.meta.url)),ne=s(()=>i(()=>import("./Index.66f176d8.js"),["./Index.66f176d8.js","./layer.2561e949.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js","./editor.0b27adde.js","./templates.7586709b.js","./template.000ba2c5.js"],import.meta.url)),ae=s(()=>i(()=>import("./Settings.99c78712.js"),["./Settings.99c78712.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js","./TrashIcon.2b15ded5.js","./Settings.d35f5258.css"],import.meta.url)),le=s(()=>i(()=>import("./index.1a528495.js").then(a=>a.i),["./index.1a528495.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js","./EyeIcon.a72b046c.js","./index.694e5fa8.css"],import.meta.url)),ce=s(()=>i(()=>import("./ContextMenu.cdebcc83.js"),["./ContextMenu.cdebcc83.js","./index.d2b5948f.js","./index.cfbf16fc.css","./index.edaf6bce.js","./App.8a7f3b43.js"],import.meta.url)),de=s(()=>i(()=>import("./Drawer.e7f8c284.js"),["./Drawer.e7f8c284.js","./index.edaf6bce.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js","./editor.0b27adde.js","./templates.7586709b.js","./template.000ba2c5.js"],import.meta.url)),ue=s(()=>i(()=>import("./Data.6694510a.js"),["./Data.6694510a.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js"],import.meta.url)),pe=s(()=>i(()=>import("./Maker.b5c46c15.js"),["./Maker.b5c46c15.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js"],import.meta.url)),_e=s(()=>i(()=>import("./Print.316bff70.js"),["./Print.316bff70.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js"],import.meta.url)),me=s(()=>i(()=>import("./Home.e08a631e.js"),["./Home.e08a631e.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js","./Labels.57b8fdee.js","./template.000ba2c5.js"],import.meta.url)),ve=s(()=>i(()=>import("./License.9f4150bb.js"),["./License.9f4150bb.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js"],import.meta.url)),he=s(()=>i(()=>import("./NewTemplate.7bba72de.js"),["./NewTemplate.7bba72de.js","./templates.7586709b.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js","./IsPro.fde0d7a5.js","./template.000ba2c5.js","./NewTemplate.01690b12.css"],import.meta.url)),fe=s(()=>i(()=>import("./Generators.f9a6f993.js"),["./Generators.f9a6f993.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js","./template.000ba2c5.js"],import.meta.url)),ge=s(()=>i(()=>import("./Banners.904d6bd9.js"),["./Banners.904d6bd9.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js","./template.000ba2c5.js"],import.meta.url)),we=s(()=>i(()=>import("./Popups.1840b078.js"),["./Popups.1840b078.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js","./template.000ba2c5.js"],import.meta.url)),xe=s(()=>i(()=>import("./Labels.57b8fdee.js"),["./Labels.57b8fdee.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js","./template.000ba2c5.js"],import.meta.url)),ye=s(()=>i(()=>import("./Apps.f93f08ea.js"),["./Apps.f93f08ea.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js","./template.000ba2c5.js"],import.meta.url)),Ee=s(()=>i(()=>import("./Thumbnails.f6b1d307.js"),["./Thumbnails.f6b1d307.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js","./template.000ba2c5.js"],import.meta.url)),Te=s(()=>i(()=>import("./Products.d15fa2f7.js"),["./Products.d15fa2f7.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js","./template.000ba2c5.js"],import.meta.url)),be=s(()=>i(()=>import("./Email.39f0efc8.js"),["./Email.39f0efc8.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js","./template.000ba2c5.js"],import.meta.url)),ke=s(()=>i(()=>import("./Forms.2bbd38fd.js"),["./Forms.2bbd38fd.js","./index.d2b5948f.js","./index.cfbf16fc.css","./App.8a7f3b43.js"],import.meta.url)),De={components:{Tools:ie,Header:re,Sidebar:ne,Settings:ae,Properties:le,DataVue:ue,Maker:pe,LicensePage:ve,Drawer:de,NewTemplate:he,PrintVue:_e,ContextMenuVue:ce,HomeVue:me,Generators:fe,Banners:ge,Popups:we,Labels:xe,Apps:ye,Thumbnails:Ee,Products:Te,Email:be,Forms:ke},data(){return{name:"prappo",editor:null,store:U,userData:w,TempData:f,isExpired:!1,stats:v,templates:oe,AppSettings:te,canvasContainer:_,EditorSettings:se,isLoogedIn:!1,vcount:0,hcount:0,responsive:E}},methods:{changeRoute(a){const l={"#/dashboard":{activeMenu:"home",activeTool:"dashboard"},"#/templates":{activeMenu:"home",activeTool:"myTemplates"},"#/new":{activeMenu:"home",activeTool:"newProject"},"#/editor":{activeMenu:"designer",activeTool:"shape"},"#/maker":{activeMenu:"maker",activeTool:"layoutMaker"},"#/license":{activeMenu:"license",activeTool:"licenseEntry"},"#/banners":{activeMenu:"banners",activeTool:"list"},"#/popups":{activeMenu:"popups",activeTool:"list"},"#/labels":{activeMenu:"labels",activeTool:"list"},"#/apps":{activeMenu:"apps",activeTool:"list"},"#/thumbnails":{activeMenu:"thumbnails",activeTool:"list"},"#/products":{activeMenu:"products",activeTool:"list"},"#/email":{activeMenu:"email",activeTool:"list"},"#/generators":{activeMenu:"generators",activeTool:"list"},"#/forms":{activeMenu:"forms",activeTool:"list"}},x=e=>{const t=/^#\/editor\/(\w+)$/,u=e.match(t);return u?u[1]:null},g=e=>/^#\/editor\/\w+$/.test(e);if(l[a]||g(a))if(g(a))this.store.activeMenu=l["#/editor"].activeMenu,this.store.activeTool=l["#/editor"].activeTool,setTimeout(()=>{v.isBusy=!0;const e=x(a);if(e)if(e.includes("post")){let u=e.split("_")[1];wp.apiRequest({path:"labelbaker/v1/featured-image?post_id="+u}).done(d=>{f.editing.id=u,f.templateType=[""],f.editing.name="##Featured Image##",y(d,"image"),v.isBusy=!1}).fail(d=>{f.editing.id=u,f.editing.name="##Featured Image##",v.isBusy=!1})}else D(e,this.serverEndpoint).then(t=>{y(t),v.isBusy=!1}).catch(t=>{v.isBusy=!1});this.canvasContainer.editor.fitIntoContainer()},500);else{let e=!1;a==="#/editor"&&this.TempData.editing.name&&this.TempData.templateType&&!e&&setTimeout(()=>{let t=Date.now().toString();k(t,this.TempData.editing.name,this.userData.details.email,this.canvasContainer,this.serverEndpoint,this.appMode,this.TempData.templateType).then(u=>{D(t,this.serverEndpoint).then(d=>{y(d),v.isBusy=!1}).catch(d=>{v.isBusy=!1,e=!0})})},200),this.store.activeMenu=l[a].activeMenu,this.store.activeTool=l[a].activeTool}},performViewportClick(){E.hideProperties=!0,E.hideSidebar=!0},rulerControl:function(){this.canvasContainer.enableRuler?this.canvasContainer.editor.enableRuler=!0:this.canvasContainer.editor.enableRuler=!1,this.canvasContainer.editor.ruler.addRuler()},gridControl:function(){this.canvasContainer.enableGrid?this.canvasContainer.editor.enableGrid=!0:this.canvasContainer.editor.enableGrid=!1,this.canvasContainer.editor.grid.addGrid()}},mounted(){this.appMode==="auth"?fetch(this.apiURL+"/get/user/info/"+W(this.userData.details.email)).then(t=>t.json()).then(t=>{w.meta=t.data,t.data.isExpired&&(this.isExpired=!0,this.toast.error("Your subscription expired please upgrade your account.",{position:"top-center",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1}),this.store.activeMenu="my-account")}).catch(t=>{w.meta={plan:"trial",created:"_",expireDate:"_",isExpired:!1,isLTD:!1},console.log("enable to reach server")}):w.meta={plan:"trial",created:"_",expireDate:"_",isExpired:!1,isLTD:!1};const a={width:parseInt(this.canvasContainer.cellWidth),height:parseInt(this.canvasContainer.cellHeight),container:"myCanvas",containerWrapper:"stage-parent-1",pageHeight:parseInt(this.canvasContainer.pageHeight),pageWidth:parseInt(this.canvasContainer.pageWidth)},l=new $(a);this.canvasContainer.editor=l,this.editor=l,l.fitIntoContainer(),window.addEventListener("resize",function(){l.fitIntoContainer()});const g=Q().appContext.config.globalProperties.appConfig;let e;this.appMode==="auth"?e=JSON.parse(JSON.stringify(g.user))._value:e=this.userData,localStorage.getItem("semitic")&&(this.canvasContainer.semitic=localStorage.getItem("semitic")),this._keyListener=function(t){if(t.key==="s"&&(t.ctrlKey||t.metaKey)){if(t.preventDefault(),this.TempData.editing.id){k(this.TempData.editing.id,this.TempData.editing.name,this.userData.details.email,this.canvasContainer,this.serverEndpoint,this.appMode).then(d=>{this.templates.templates=null});return}let u={};for(let d in this.canvasContainer)d!="editor"&&(u[d]=this.canvasContainer[d]);this.stats.isBusy=!0,z(this.serverEndpoint,this.editor,u,e).then(d=>{this.stats.isBusy=!1,q().success("Saved !",{position:"bottom-center",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})}).catch(d=>{alert("Unable to save data")})}switch(t.key==="z"&&(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.editor.undo()),t.key==="l"&&(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.stats.showNewModal=!0),t.key){case"ArrowUp":_.editor.selected.y(_.editor.selected.y()-1);break;case"ArrowDown":_.editor.selected.y(_.editor.selected.y()+1);break;case"ArrowLeft":_.editor.selected.x(_.editor.selected.x()-1);break;case"ArrowRight":_.editor.selected.x(_.editor.selected.x()+1);break}},document.addEventListener("keydown",this._keyListener.bind(this)),document.querySelector("div.konvajs-content").classList.replace("konvajs-content","label-baker-content"),this.changeRoute(window.location.hash),window.addEventListener("hashchange",()=>{this.changeRoute(window.location.hash)})}},Me=a=>(X("data-v-b9fa2623"),a=a(),Z(),a),Ce={key:0,class:"w-full bg-red-100 items-center flex gap-5 justify-center text-red-500 text-center py-2 font-semibold"},Pe={class:"bg-gray-100 dark:bg-gray-900 dark:text-white text-gray-600 h-screen flex overflow-hidden text-sm"},Ie={class:"flex-grow overflow-hidden h-full flex flex-col"},Le={id:"editor-viewport",class:"flex-grow bg-gray-400 dark:bg-gray-900 overflow-y-auto relative"},Ve=Me(()=>m("div",{class:"flex w-full items-center mb-7"},[m("div",{style:{height:"80vh"},class:"w-full",id:"stage-parent-1"},[m("div",{class:"flex justify-center",id:"myCanvas"})])],-1)),Ae=[Ve],Oe={key:1,class:"w-full flex-grow flex overflow-x-hidden"},Re={key:2,class:"w-full flex-grow flex overflow-x-hidden"},Be={key:3,class:"w-full flex-grow flex overflow-x-hidden"},Se={key:4,class:"w-full flex-grow flex overflow-x-hidden"},He={key:5,class:"w-full flex-grow flex overflow-x-hidden"},je={key:6,class:"w-full flex-grow flex overflow-x-hidden"},Ge={key:7,class:"w-full flex-grow flex overflow-x-hidden"},Ne={key:8,class:"w-full flex-grow flex overflow-x-hidden"},Fe={key:9,class:"w-full flex-grow flex overflow-x-hidden"},Ke={key:10,class:"w-full flex-grow flex overflow-x-hidden"},Ue={key:11,class:"w-full flex-grow flex overflow-x-hidden"},We={key:12,class:"w-full flex-grow flex overflow-x-hidden"},ze={key:13,class:"w-full flex-grow flex overflow-x-hidden"};function qe(a,l,x,g,e,t){const u=n("Header"),d=n("Tools"),T=n("Settings"),C=n("Properties"),P=n("ContextMenuVue"),I=n("DataVue"),L=n("Maker"),V=n("HomeVue"),A=n("Banners"),O=n("Popups"),R=n("Labels"),B=n("Apps"),S=n("Thumbnails"),H=n("Products"),j=n("Email"),G=n("Forms"),N=n("Generators"),F=n("LicensePage"),K=n("Drawer");return o(),c("div",null,[e.isExpired?(o(),c("div",Ce,[J(" Please upgrade your account "),m("button",{onClick:l[0]||(l[0]=b=>e.store.activeMenu="my-account"),class:"bg-red-500 text-white px-3 py-1 rounded-md"}," Upgrade ")])):r("",!0),m("div",Pe,[m("div",Ie,[e.editor&&e.AppSettings.enableHeader?(o(),h(u,{key:0,editor:e.editor},null,8,["editor"])):r("",!0),m("div",{class:Y([{hideme:e.store.activeMenu!=="designer"},"flex-grow flex overflow-x-hidden"])},[e.editor?(o(),h(d,{key:0,editor:e.editor},null,8,["editor"])):r("",!0),m("div",Le,[e.editor?(o(),h(T,{key:0,editor:e.editor},null,8,["editor"])):r("",!0),m("div",{onClick:l[1]||(l[1]=(...b)=>t.performViewportClick&&t.performViewportClick(...b)),class:"sm:p-4 p-4"},Ae)]),e.editor?(o(),h(C,{key:Date.now(),editor:e.editor},null,8,["editor"])):r("",!0),e.editor?(o(),h(P,{key:2,editor:e.editor},null,8,["editor"])):r("",!0)],2),e.store.activeMenu==="data"?(o(),c("div",Oe,[p(I)])):r("",!0),e.store.activeMenu==="maker"?(o(),c("div",Re,[p(L)])):r("",!0),e.store.activeMenu==="home"?(o(),c("div",Be,[p(V)])):r("",!0),e.store.activeMenu==="banners"?(o(),c("div",Se,[p(A)])):r("",!0),e.store.activeMenu==="popups"?(o(),c("div",He,[p(O)])):r("",!0),e.store.activeMenu==="labels"?(o(),c("div",je,[p(R)])):r("",!0),e.store.activeMenu==="apps"?(o(),c("div",Ge,[p(B)])):r("",!0),e.store.activeMenu==="thumbnails"?(o(),c("div",Ne,[p(S)])):r("",!0),e.store.activeMenu==="products"&&a.isWooExists?(o(),c("div",Fe,[p(H)])):r("",!0),e.store.activeMenu==="email"?(o(),c("div",Ke,[p(j)])):r("",!0),e.store.activeMenu==="forms"?(o(),c("div",Ue,[(o(),h(G,{key:Date.now()}))])):r("",!0),e.store.activeMenu==="generators"?(o(),c("div",We,[p(N)])):r("",!0),e.store.activeMenu==="license"?(o(),c("div",ze,[p(F)])):r("",!0)]),a.appMode==="auth"?(o(),h(K,{key:0})):r("",!0)])])}const Je=ee(De,[["render",qe],["__scopeId","data-v-b9fa2623"]]),et=Object.freeze(Object.defineProperty({__proto__:null,default:Je},Symbol.toStringTag,{value:"Module"}));export{et as E,E as r};
